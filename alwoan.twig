{#
| Variable                               | Type                        | Description                                                            |
|----------------------------------------|-----------------------------|------------------------------------------------------------------------|
| page                                   | object                      |                                                                        |
| page.title                             | string                      | *could be html                                                         |
| page.slug                              | string                      | ex: "cat.show"                                                         |
| product                                | Product                     |                                                                        |
| product.id                             | int                         |                                                                        |
| product.name                           | string                      |                                                                        |
| product.description                    | string                      | HTML                                                                   |
| product.url                            | string                      |                                                                        |
| product.promotion_title                | string                      |                                                                        |
| product.subtitle                       | string                      |                                                                        |
| product.type                           | string                      | product, service, group_products, codes, digital, food, donating       |
| product.status                         | string                      | sale, out, out-and-notify                                              |
| product.weight                         | ?string                     |                                                                        |
| product.calories                       | ?float                      |                                                                        |
| product.sku                            | ?string                     |                                                                        |
| product.rating                         | ?Rating                     |                                                                        |
| product.rating.count                   | int                         |                                                                        |
| product.rating.stars                   | int                         |                                                                        |
| product.price                          | float                       | can be string too `-`, when merchant doesn't want to show zero         |
| product.sale_price                     | float                       |                                                                        |
| product.regular_price                  | float                       |                                                                        |
| product.starting_price                 | ?float                      |                                                                        |
| product.quantity                       | ?int                        | if it's null, means it's unlimited                                     |
| product.sold_quantity                  | int                         |                                                                        |
| product.max_quantity                   | int                         |                                                                        |
| product.discount_ends                  | ?date                       |                                                                        |
| product.is_taxable                     | bool                        | Is the tax included in the price                                       |
| product.category                       | ?Category                   |                                                                        |
| product.category.name                  | string                      |                                                                        |
| product.category.url                   | string                      |                                                                        |
| product.image                          | object                      |                                                                        |
| product.image.url                      | string                      |                                                                        |
| product.image.alt                      | ?string                     |                                                                        |
| product.images                         | array                       |                                                                        |
| product.images[].id                    | int                         |                                                                        |
| product.images[].url                   | string                      |                                                                        |
| product.images[].alt                   | ?string                     |                                                                        |
| product.images[].video_url             | ?string                     |                                                                        |
| product.images[].type                  | string                      | `image` `video`                                                        |
| product.brand                          | ?object                     |                                                                        |
| product.brand.id                       | int                         |                                                                        |
| product.brand.url                      | ?string                     |                                                                        |
| product.brand.name                     | ?string                     |                                                                        |
| product.brand.logo                     | ?string                     |                                                                        |
| product.tags                           | ?Tags[] *Collection         |                                                                        |
| product.tags[].name                    | string                      |                                                                        |
| product.tags[].url                     | string                      |                                                                        |
| product.options                        | ProductOption[] *Collection | @see views/pages/partials/product/options.twig                         |
| product.notify_availability            | ?object                     | does product outOfStock & can visitor subscribe to notify availability |
| product.notify_availability.channels   | array                       | ex: ['sms', 'email']                                                   |
| product.notify_availability.subscribed | bool                        | Does user subscribed before                                            |
| product.donation                       | ?ProductDonation            |                                                                        |
| product.donation.target_message        | ?string                     | Message if reached to target or target expired                         |
| product.donation.collected_amount      | float                       |                                                                        |
| product.donation.target_amount         | float                       |                                                                        |
| product.donation.target_percent        | float                       |                                                                        |
| product.donation.target_end_date       | ?Date                       |                                                                        |
| product.donation.can_donate            | bool                        | `true` When there is no campaign or (target not reached & not expired) |
| product.has_read_more                  | bool                        |                                                                        |
| product.can_add_note                   | bool                        |                                                                        |
| product.can_show_remained_quantity     | bool                        |                                                                        |
| product.can_show_sold                  | bool                        |                                                                        |
| product.can_upload_file                | bool                        |                                                                        |
| product.has_custom_form                | bool                        | Is it for  `Food` or `Custom Service` product                          |
| product.has_metadata                   | bool                        |                                                                        |
| product.has_options                    | bool                        |                                                                        |
| product.is_on_sale                     | bool                        | Product has discounted price                                           |
| product.is_hidden_quantity             | bool                        | The quantity is hidden by merchant, or product not available           |
| product.is_available                   | bool                        |                                                                        |
| product.is_in_wishlist                 | bool                        |                                                                        |
| product.is_out_of_stock                | bool                        |                                                                        |
| product.is_require_shipping            | bool                        |                                                                        |
| product.base_currency_price            | float                       | product.price with base currency (SAR)                                 |
| product.discount_percentage            | ?string                     | ex: "20%"                                                              |
| product.has_3d_image                   | bool                        |                                                                        |
| product.has_size_guide                 | bool                        |                                                                        |
| product.is_giftable                    | bool                        |                                                                        |
| product.add_to_cart_label              | string                      |                                                                        |
| product.currency                       | string                      |                                                                        |
#}
{% extends "layouts.master" %}
{% block content %}
	{% set product_description_next_image = theme.settings.get('product_description_position_under',false) %}

	<div
		class="container">
		{# add breadcumbs container in pages to make a space in case breadcrumbs is off #}
		<nav class="breadcrumbs w-full py-5">
			<salla-breadcrumb></salla-breadcrumb>
		</nav>
		<div class="flex flex-col items-start md:flex-row" id="product-{{ product.id }}">
			<div class="sidebar md:sticky top-24 w-full md:!w-2/4 rtl:ml-8 ltr:mr-8 pb-8   md:pb-16 overflow-hidden shrink-0">
				{% set has_many_images = product.images|length > 1 %}
				<salla-slider id="details-slider-{{ product.id }}" class="details-slider image-slider bg-white neo-shadow mr-1 rounded-lg " type="thumbs" loop="false" auto-height listen-to-thumbnails-option show-thumbs-controls="false">
					{% if product.promotion_title %}
						<div class="promotion-title">{{ product.promotion_title }}</div>
					{% endif %}

					<salla-button class="btn--wishlist animated sws main-wish-btn" data-id="{{ product.id }}" onclick="salla.wishlist.toggle('{{ product.id }}')" shape="icon" fill="outline" color="light">

						<svg xmlns="http://www.w3.org/2000/svg" width="65" height="65" viewbox="0 0 65 65" fill="none" class="">
							<path d="M59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z"/>
							<path d="M59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z" id="bg-heart-color-fill" fill="#F9D7D1"/>
							<path d="M48.75 5.07812C44.263 5.07812 40.2005 6.89711 37.2602 9.83836L33.2191 13.8612C32.822 14.2584 32.1801 14.2584 31.783 13.8612C31.783 13.8612 27.7499 9.82922 27.7418 9.83836C24.7995 6.89711 20.737 5.07812 16.25 5.07812C7.27492 5.07812 0 12.353 0 21.3281C0 24.7183 1.04 27.8647 2.81633 30.4688C2.81633 30.4688 3.5618 31.6509 4.44336 32.5315C5.32492 33.412 29.6278 57.7159 29.6278 57.7159C30.421 58.5091 31.461 58.9062 32.5 58.9062C33.539 58.9062 34.579 58.5091 35.3722 57.7159C35.3722 57.7159 59.6761 33.412 60.5566 32.5315C61.4372 31.6509 62.1837 30.4688 62.1837 30.4688C63.96 27.8647 65 24.7183 65 21.3281C65 12.353 57.7251 5.07812 48.75 5.07812ZM59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z" fill="#394240"/>
							<path d="M48.75 11.1719C48.1884 11.1719 47.7344 11.6259 47.7344 12.1875C47.7344 12.7491 48.1884 13.2031 48.75 13.2031C53.237 13.2031 56.875 16.8411 56.875 21.3281C56.875 21.8898 57.329 22.3438 57.8906 22.3438C58.4523 22.3438 58.9062 21.8898 58.9062 21.3281C58.9062 15.7198 54.3583 11.1719 48.75 11.1719Z" fill="#394240"/>
						</svg>
					</salla-button>

					{# Calories Badge #}
					{% if product.calories %}
						<div class="absolute z-[2] top-4 rtl:left-4 ltr:right-4 bg-white shadow-sm flex flex-col justify-center items-center rounded-full w-20 h-20 md:w-24 md:h-24">
							<span class="text-red-500 text-xl leading-none font-bold">{{ product.calories }}</span>
							<span class="text-xs text-gray-500">{{ trans('pages.products.calories') }}</span>
						</div>
					{% endif %}

					<div slot="items">
						{% for image in product.images %}
							{% if image.three_d_image_url %}
								<model-viewer style="min-height: 500px;" class="swiper-slide model-entry w-full h-full" loading="eager" camera-controls touch-action="pan-y" auto-rotate poster="{{ image.url }}" src="{{ image.three_d_image_url }}" shadow-intensity="1" alt="{{ image.alt }}"></model-viewer>
							{% else %}
								<a data-fslightbox="product_{{ product.id }}" data-img-id="{{ image.id }}" data-slid-index="{{ loop.index-1 }}" {% if image.video_url %} data-video-src="{{ image.video_url }}" {% endif %} data-caption="{{ image.alt }}" data-infinite="false" data-type="{{ image.video_url?'youtube':'image' }}" href="{{ (image.video_url is iterable ? image.video_url|first : image.video_url)|default(image.url) }}" aria-label="{{ product.name }}" class="swiper-slide magnify-wrapper homeslider__slide {{ image.video_url?'video-entry':'' }}">
									{% if loop.first %}
										<img id="{{image.id}}" fetchpriority="high" loading="eager" src="{{ image.url }}" alt="{{ image.alt }}" class="h-full object-{{ theme.settings.get('slider_background_size') }} w-full {{ image.three_d_image_url ? 'model-poster' : '' }}">
									{% else %}
										<img id="{{image.id}}" src="{{ 'images/s-empty.png' | cdn }}" data-src="{{ image.url }}" alt="{{ image.alt }}" class="lazy h-full object-{{ theme.settings.get('slider_background_size') }} w-full {{ image.three_d_image_url ? 'model-poster' : '' }}">
									{% endif %}
								</a>
							{% endif %}
						{% endfor %}
					</div>

					{% if has_many_images %}
						<div slot="thumbs">
							{% for image in product.images %}
								<div class="slide--one-fourth {{ image.video_url?'video-entry':'' }} {{ image.three_d_image_url?'model-entry':'' }}">
									{% if loop.index < 5 %}
										<img src="{{ image.url }}" loading="eager" class="object-cover w-full h-full bg-gray-100 rounded-md overflow-hidden" title="{{ image.alt }}" alt="{{ image.alt }}"/>
									{% else %}
										<img data-src="{{ image.url }}" src="{{ 'images/s-empty.png' | cdn }}" class="object-cover w-full h-full lazy bg-gray-100 rounded-md overflow-hidden" title="{{ image.alt }}" alt="{{ image.alt }}"/>
									{% endif %}
								</div>
							{% endfor %}
						</div>
					{% endif %}
				</salla-slider>
			</div>

			<div class="bg-white neo-shadow p-3 rounded-lg main-content md:sticky md:overflow-hidden top-24 w-full md:w-2/4 md:pb-16">

				{% hook 'product:single.description.start' %}

				{% if product.brand.name %}
					<div class="product-brand mb-5 w-12">
						<a class="brand-logo" href="{{ product.brand.url }}" title="{{ product.brand.name }}">
							<img width="100%" height="100%" class="max-h-full object-contain" src="{{ product.brand.logo }}" title="{{ product.brand.name }}" alt="{{ product.brand.name }}">
						</a>
					</div>
				{% endif %}

				<h1 class="p-3 text-xl md:text-2xl leading-10 font-bold mb-6 text-gray-800">{{ product.name }}</h1>

				{% if product.subtitle %}
					<h2 class="product-entry__sub-title text-sm text-gray-500 leading-6 mb-2.5">
						{{ product.subtitle }}
					</h2>
				{% endif %}

				{% if product.rating %}
					<salla-rating-stars value="{{ product.rating.stars }}" reviews="{{ product.rating.count }}"></salla-rating-stars>
				{% endif %}

				{% if product.is_taxable %}
					<small class="color-grey">{{ trans('pages.products.tax_included') }}</small>
				{% endif %}
				{# Price #}
				<div class="flex whitespace-nowrap gap-4 items-center">
					<div class="{{ product.is_on_sale ? '' : 'hidden' }} space-x-2 rtl:space-x-reverse whitespace-nowrap">
						<h4 class="text-red-800 font-bold text-xl inline-block">{{product.sale_price|money}}</h4>
						<span class="text-gray-500 line-through">{{product.regular_price|money}}</span>
					</div>
					<div class="gap-4 {{ product.is_on_sale ? 'hidden' : 'flex' }}">
						{% if product.starting_price %}
							<span class="">{{ trans('pages.products.starting_price') }}</span>
						{% endif %}
						<h2 class=" font-bold text-xl inline-block">
							{{product.starting_price ? product.starting_price|money : product.price|money }}</h2>
					</div>
				</div>
				{% if product_description_next_image %}
					<div class="product__description p-2 px-5 sm:p-1 leading-7 mb-3">
						{% set product_desc = product.description|replace({"&nbsp;":"\n"}) %}
						{% if product.has_read_more %}
							<article class="article article--main relative leading-8 overflow-hidden transition-all max-h-0 duration-300 py-4" id="more-content" style="max-height:5.25rem">
								{{ product_desc|raw }}
							</article>

							{# Read More Button #}
							<a id="btn-show-more" class="link--primary inline-block mt-2 cursor-pointer">
								{{ trans('pages.products.read_more') }}
							</a>
						{% else %}
							<article class="article--main pb-1">
								{{ product_desc|raw }}
							</article>
						{% endif %}
					</div>
				{% endif %}


				{% if product.tags|length and theme.settings.get('show_tags', true) %}
					<div class="mb-3">
						{% for tag in product.tags %}
							<a href="{{ tag.url }}" class="rtl:ml-2 ltr:mr-2 inline-flex  text-gray-500 hover:text-primary underline text-sm mb-1">{{ tag.name }}
								,</a>
						{% endfor %}
					</div>
				{% endif %}

				<div class="flex rtl:space-x-reverse space-x-3">
					<salla-social-share class="inline-flex mb-5" aria-label="social share"></salla-social-share>

					<salla-button class="btn--wishlist main-wish-btn-product animated hidden sm:inline-flex" data-id="{{ product.id }}" onclick="salla.wishlist.toggle('{{ product.id }}')" shape="icon" fill="outline" color="light" aria-label="add to wishlist">

						<svg xmlns="http://www.w3.org/2000/svg" width="65" height="65" viewbox="0 0 65 65" fill="none" class="">
							<path d="M59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z"/>
							<path d="M59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z" id="bg-heart-color-fill" fill="#F9D7D1"/>
							<path d="M48.75 5.07812C44.263 5.07812 40.2005 6.89711 37.2602 9.83836L33.2191 13.8612C32.822 14.2584 32.1801 14.2584 31.783 13.8612C31.783 13.8612 27.7499 9.82922 27.7418 9.83836C24.7995 6.89711 20.737 5.07812 16.25 5.07812C7.27492 5.07812 0 12.353 0 21.3281C0 24.7183 1.04 27.8647 2.81633 30.4688C2.81633 30.4688 3.5618 31.6509 4.44336 32.5315C5.32492 33.412 29.6278 57.7159 29.6278 57.7159C30.421 58.5091 31.461 58.9062 32.5 58.9062C33.539 58.9062 34.579 58.5091 35.3722 57.7159C35.3722 57.7159 59.6761 33.412 60.5566 32.5315C61.4372 31.6509 62.1837 30.4688 62.1837 30.4688C63.96 27.8647 65 24.7183 65 21.3281C65 12.353 57.7251 5.07812 48.75 5.07812ZM59.6314 30.4454C59.6314 30.4454 59.0098 31.2071 57.7799 32.437C56.55 33.667 33.9361 56.2798 33.9361 56.2798C33.539 56.677 33.02 56.875 32.5 56.875C31.98 56.875 31.461 56.677 31.0639 56.2798C31.0639 56.2798 8.45 33.6659 7.22008 32.436C5.99016 31.2061 5.36859 30.4444 5.36859 30.4444C3.2957 27.9754 2.03125 24.8056 2.03125 21.3281C2.03125 13.4753 8.39719 7.10938 16.25 7.10938C20.1764 7.10938 23.7311 8.69984 26.3037 11.2745L26.3128 11.2653L31.0639 16.0154C31.8571 16.8086 33.1429 16.8086 33.9361 16.0154L38.6872 11.2653L38.6963 11.2745C41.2689 8.69984 44.8236 7.10938 48.75 7.10938C56.6028 7.10938 62.9688 13.4753 62.9688 21.3281C62.9688 24.8056 61.7043 27.9754 59.6314 30.4454Z" fill="#394240"/>
							<path d="M48.75 11.1719C48.1884 11.1719 47.7344 11.6259 47.7344 12.1875C47.7344 12.7491 48.1884 13.2031 48.75 13.2031C53.237 13.2031 56.875 16.8411 56.875 21.3281C56.875 21.8898 57.329 22.3438 57.8906 22.3438C58.4523 22.3438 58.9062 21.8898 58.9062 21.3281C58.9062 15.7198 54.3583 11.1719 48.75 11.1719Z" fill="#394240"/>
						</svg>

					</salla-button>
				</div>

				{% if product.sold_quantity or product.can_show_remained_quantity %}
					<div class="bg-white py-2.5 mb-5 rounded-md inline-flex text-sm">
						{% if product.sold_quantity %}
							<div class="px-4 !text-red-800">
								<i class="sicon-fire rtl:ml-1.5 ltr:mr-1.5"></i>
								{{ trans('pages.products.sold') }}
								<span>{{ pluralize('pages.products.sold_times', product.sold_quantity)|raw }}</span>
							</div>
						{% endif %}
						{% if product.can_show_remained_quantity %}
							<div class="px-4 rtl:even:border-r ltr:even:border-l even:border-gray-200">
								<i class="!text-red-800 sicon-box-bankers rtl:ml-1.5 ltr:mr-1.5"></i>
								{{ trans('pages.products.remained') }}
								<span>{{ product.quantity }}</span>
							</div>
						{% endif %}
					</div>
				{% endif %}
				{% if product.sku %}
					<div class="mb-4 flex justify-between sm:grid sm:grid-cols-3 bg-white rounded-md px-4 py-2">
						<div class="flex items-center">
							<i class="sicon-barcode mx-1"></i>
							{{ trans('pages.products.sku') }}
						</div>
						<div class="text-unicode">{{ product.sku }}</div>
					</div>
				{% endif %}
				{% hook 'product:single.description' %}

				{# Installment Methods #}
				<salla-installment price="{{ product.price }}"></salla-installment>
				{% if product.has_metadata %}
					<salla-metadata></salla-metadata>
				{% endif %}

				{% if product.show_availability %}
					<section class="bg-white p-5 rounded-md mb-5 last:mb-0">
						<div class="center-between">
							<label class="flex items-center text-base">
								<span class="sicon-location rtl:ml-1 ltr:mr-1"></span>
								<span class="inline-block">{{ trans('pages.products.availability') }}</span>
							</label>
							<div class="mt-1 sm:mt-0 sm:col-span-2 text-end">
								<div class="flex rtl:space-x-reverse space-x-3">
									<a href="#!" onclick="salla.event.dispatch('scopes::open', {mode: 'availability', product_id: '{{ product.id }} '})" class="group text-primary flex items-center justify-center">
										<span>{{ trans('pages.products.select_branch') }}</span>
										<span class="sicon-keyboard_arrow_left mr-2 transition-all group-hover:-translate-x-1"></span>
									</a>
								</div>
							</div>
						</div>
					</section>
				{% endif %}

				<form class="form product-form" enctype="multipart/form-data" method="post" onsubmit="return salla.form.onSubmit('cart.addItem', event)">
					<input type="hidden" name="id" value="{{ product.id }}">


					{% hook 'product:single.form.start' %}

					{% include 'pages.partials.product.options' %}

					{% hook 'product:single.form.end' %}

					<section class="flex bg-white p-5 sm:pb-0 rounded-md rounded-b-none">
						<div class="center-between w-full">
							<label class="form-label">
								<b class="block">
									{{ trans('pages.products.price') }}
								</b>
							</label>

							<div class="flex whitespace-nowrap price-wrapper gap-4 items-center">
								<div class="{{ product.is_on_sale ? '' : 'hidden' }} price_is_on_sale space-x-2 rtl:space-x-reverse whitespace-nowrap">
									<h2 class="total-price text-red-800 font-bold text-xl inline-block">{{product.sale_price|money}}</h2>
									<span class="before-price text-gray-500 line-through">{{product.regular_price|money}}</span>
								</div>
								<div class="starting-or-normal-price gap-4 {{ product.is_on_sale ? 'hidden' : 'flex' }}">
									{% if product.starting_price %}
										<span class="starting-price-title">{{ trans('pages.products.starting_price') }}</span>
									{% endif %}
									<h2 class="total-price font-bold text-xl inline-block">
										{{product.starting_price ? product.starting_price|money : product.price|money }}</h2>
								</div>
							</div>

							<div class="out-of-stock min-h-7 leading-7 hidden text-base text-red-600 !opacity-50 font-bold">{{ trans('pages.products.out_of_stock')}}</div>
						</div>
					</section>
					{# Pre-order Campaign #}
					{% if product.has_preorder_campaign %}
						<section class="mt-5 p-5">
							<salla-count-down pre-order='{{ product.preorder|json_encode}}' boxed labeled></salla-count-down>
						</section>
					{% endif %}

					<section
						class="sticky-product-bar bg-white p-3 rounded-md rounded-b-none">
						{# Quantity #}
						{% if product.is_hidden_quantity or product.type == 'booking' %}
							<input type="hidden" value="1" name="quantity" aria-label="Quantity"/>
						{% else %}
							<div class="sticky-product-bar__quantity center-between mb-5">
								<label class="form-label font-bold">
									{{ trans('pages.products.quantity') }}
								</label>
								<salla-quantity-input max="{{ product.max_quantity }}" value="1" name="quantity" aria-label="Quantity" class="border-gray-200 flex justify-end"></salla-quantity-input>
							</div>
						{% endif %}
						{# Add to cart #}
						<salla-add-product-button {{product.can_quick_buy ? 'quick-buy' : ''}} {{theme.settings.get('sticky_add_to_cart') ? ' support-sticky-bar' : ''}} {{product.is_require_shipping ? 'required-shipping' : ''}} amount="{{ product.base_currency_price }}" class="mt-5 w-full sticky-product-bar__btn product-page-button" product-status="{{ product.status }}" product-type="{{ product.type }}" product-id="{{ product.id }}" loader-position="end" type="submit" width="wide" {# Notify availability props#} {% if product.notify_availability %} {{ product.notify_availability.subscribed ? 'is-subscribed' : '' }} channels="{{ product.notify_availability.channels|join(',') }}" subscribed-options="{{ product.notify_availability.subscribed_options|json_encode }}" {{ product.notify_availability.options ? 'notify-options-availability' : '' }} {% endif %}>
							{{ product.add_to_cart_label }}
						</salla-add-product-button>
					</section>
					{% if product.is_giftable %}
						<salla-gifting class="mt-5" widget-subtitle="{{ gifting_intro }}" product-id="{{ product.id }}" {{ product.is_require_shipping ? 'physical-products' : '' }}></salla-gifting>
					{% endif %}
				</form>

				{% hook 'product:single.description.end' %}
				<salla-quick-order class="mt-5 md:-mb-2 block"></salla-quick-order>
			</div>
		</div>
		<salla-offer></salla-offer>
	</div>

	{# Comments Area #}

	{% if not product_description_next_image %}

		{% if product.description or store.settings.rating.show_on_product %}
			<hr class="w-5/6 mx-auto my-5 border-primary border">
			<div class="container rounded-lg neo-shadow bg-white p-5">

				<div class="tab-comment-description-box w-5/6 mx-auto">
					{% if product.description %}
						<div class="product__description  leading-7  ">
							<h3 class="mb-4 font-semibold text-2xl">{{ trans('pages.products.description') }}</h3>

							{% set product_desc = product.description|replace({"&nbsp;":"\n"}) %}
							{% if product.has_read_more %}
								<article class="article article--main relative leading-8 overflow-hidden transition-all max-h-0 duration-300 py-4" id="more-content" style="max-height:5.25rem">
									{{ product_desc|raw }}
								</article>

								{# Read More Button #}
								<a id="btn-show-more" class="link--primary inline-block mt-2 cursor-pointer">
									{{ trans('pages.products.read_more') }}
								</a>
							{% else %}
								<article class="article--main pb-1">
									{{ product_desc|raw }}
								</article>
							{% endif %}
						</div>
					{% endif %}

					{% if store.settings.rating.show_on_product %}


						<salla-comments item-id="{{product.id}}" type="product"></salla-comments>

					{% endif %}
				</div>

			</div>
		{% endif %}

	{% else %}

		{% if store.settings.rating.show_on_product %}
			<hr class="w-5/6 condition-salla-comment-hr mx-auto my-5 border-primary border">
			<div class="container rounded-lg s-condition-comments-container ">

			<salla-comments item-id="{{product.id}}" type="product"></salla-comments>
			</div>
		{% endif %}

	{% endif %}

	
	<hr
	class="w-5/6 mx-auto my-5 border-primary border">
	{# Similar Products Area #}
	<div class="container">
		<salla-products-slider source="related" source-value="{{product.id}}" block-title="{{trans('pages.products.similar_products')}}" display-all-url></salla-products-slider>
	</div>


{% endblock %}

{% block scripts %}
	<script defer src="{{ 'product.js' | asset }}"></script>
	{% if product.has_3d_image %}
		<script type="module" defer src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
	{% endif %}
{% endblock %}

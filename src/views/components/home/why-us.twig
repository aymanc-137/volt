{#
| Variable               | Type   | Description                                        |
|-----------------------|--------|-----------------------------------------------------|
| title                 | string | Full title text                                    |
| colored_word          | string | Word from title to be colored with gradient        |
| description           | string | Brief description of the section                   |
| image                 | string | Side image URL                                     |
| image_alt             | string | Alternative text for the image                     |
| features[]            | array  | Array of features with icon, title, and description|
| features[].icon       | string | SallaIcons css class `sicon-*`                    |
| features[].title      | string | Feature title                                      |
| features[].description| string | Feature description                                |
| position              | int    | Component position in the page                     |
| slas_hbg              | bool   | Enable slash background                            |
| enable_glow           | bool   | Enable background glow effect                      |
| marquee               | bool   | Enable marquee text                                |
#}

{% set slashbg = component.slas_hbg | default(false) %}
{% set marquee = component.marquee | default(false) %}
{% set marqueetext = component.marqueetext | default(" سرعة /// أداء /// تحكم ") %}
{% set enable_border = component.enable_border | default(false) %}
{% set enable_glow = component.enable_glow | default(false) %}
{% set marquee_text_position = component.marquee_text_position | default('both') %}
{% set marquee_is_moving = component.marquee_is_moving %}
{% set marquee_text_size = component.marquee_text_size | default('8') %}
{% set slas_hbg_size = component.slas_hbg_size | default('20') %}
{% set slas_hbg_use_primary_color = component.slas_hbg_use_primary_color %}
{% set slas_hbg_color = component.slas_hbg_color~"1A" | default('#0000001A') %}

<section class="z-10 overflow-hidden {{ enable_border ? 'border-y border-[var(--color-primary)]' : ''}} s-block--why-us relative {{ slashbg ? 'slash-bg-' ~ position ~ ' dynamic-bg-color' : ''}}">
  {% if enable_glow %}
  <!-- Glow balls -->
  <div class="absolute top-[15%] left-[25%] w-64 h-64 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
  <div class="absolute bottom-[15%] right-[25%] w-56 h-56 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-scandary);"></div>
  <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-52 h-52 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
  {% endif %}
  {% if marquee %}

  {% if marquee_text_position == 'top' or marquee_text_position == 'both' %}
  <div class="styleish-text absolute top-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
      <div 
      style="font-size: {{marquee_text_size}}rem; line-height:1;"
      class="{{ marquee_is_moving ? 'marquee-reverse-sections' : '' }} flex whitespace-nowrap w-max">
          <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
              {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
          </span>
          <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
              {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
          </span>
      </div>
  </div>
  {% endif %}

  {% if marquee_text_position == 'bottom' or marquee_text_position == 'both' %}
  <div class="styleish-text absolute bottom-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
      <div
      style="font-size: {{marquee_text_size}}rem; line-height:1;"
      class="{{ marquee_is_moving ? 'marquee-content-sections' : '' }} flex whitespace-nowrap w-max">
          <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
              {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
          </span>
          <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
              {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
          </span>
      </div>
  </div>
  {% endif %}

  {% endif %}
  <div class="container">
    <div class="why-us-grid">
      <!-- Media/Image Section -->
      <div class="why-us-media">
        <img
          src="{{ component.image }}"
          alt="{{ component.image_alt | default('Why us image') }}"
          class="why-us-media__image lazy"
          loading="lazy"
        />
      </div>

      <!-- Content Section -->
      <div class="why-us-content">
        <!-- Title -->
        {% if component.title %}
          <h2 id="why-us-title-{{ position }}" class="why-us-title dynamic-text-color">
            {{ component.title }}
          </h2>
        {% endif %}

        <!-- Description -->
        {% if component.description %}
          <p class="why-us-description">{{ component.description }}</p>
        {% endif %}

        <!-- Features Grid -->
        {% if component.features %}
          <div class="why-us-features">
            {% for feature in component.features %}
              <div class="why-us-feature">
                <div class="why-us-feature__icon">
                  <i class="{{ feature.icon }}"></i>
                </div>
                <div>
                  <h3 class="why-us-feature__title">{{ feature.title }}</h3>
                  <p class="why-us-feature__description">{{ feature.description }}</p>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% if component.colored_word %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const titleEl = document.getElementById('why-us-title-{{ position }}');
      if (titleEl) {
        const word = '{{ component.colored_word }}';
        const regex = new RegExp('(' + word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
        titleEl.innerHTML = titleEl.innerHTML.replace(
          regex,
          '<span class="bg-gradient-to-r from-primary to-scandary bg-clip-text text-transparent">$1</span>'
        );
      }
    });
  </script>
{% endif %}

<style>
{% if slas_hbg_use_primary_color %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, var(--color-primary-10) 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, var(--color-primary-10)  50%, 
                                var(--color-primary-10) 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% else %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, {{slas_hbg_color}} 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, {{slas_hbg_color}}  50%, 
                                {{slas_hbg_color}} 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% endif %}
</style>

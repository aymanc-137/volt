{#
| Variable               | Type   | Description                                        |
|-----------------------|--------|-----------------------------------------------------|
| title_pre             | string | First part of the title                            |
| title_highlight       | string | Highlighted word in the title (with gradient)      |
| title_suffix          | string | Last part of the title                             |
| description           | string | Brief description of the section                   |
| image                 | string | Side image URL                                     |
| image_alt             | string | Alternative text for the image                     |
| features[]            | array  | Array of features with icon, title, and description|
| features[].icon       | string | SallaIcons css class `sicon-*`                    |
| features[].title      | string | Feature title                                      |
| features[].description| string | Feature description                                |
| position              | int    | Component position in the page                     |
#}

<section class="s-block s-block--why-us">
  <div class="container">
    <div class="why-us-grid">
      <!-- Media/Image Section -->
      <div class="why-us-media">
        <img
          src="{{ component.image }}"
          alt="{{ component.image_alt | default('Why us image') }}"
          class="why-us-media__image lazy"
          loading="lazy"
        />
      </div>

      <!-- Content Section -->
      <div class="why-us-content">
        <!-- Title -->
        {% if component.title_pre or component.title_highlight or component.title_suffix %}
          <h2 id="why-us-title-{{ position }}" class="why-us-title daynmic-text-color">
            {% if component.title_pre %}
              {{ component.title_pre }}
            {% endif %}
            {% if component.title_highlight %}
              {{ component.title_highlight }}
            {% endif %}
            {% if component.title_suffix %}
              {{ component.title_suffix }}
            {% endif %}
          </h2>
        {% endif %}

        <!-- Description -->
        {% if component.description %}
          <p class="why-us-description">{{ component.description }}</p>
        {% endif %}

        <!-- Features Grid -->
        {% if component.features %}
          <div class="why-us-features">
            {% for feature in component.features %}
              <div class="why-us-feature">
                <div class="why-us-feature__icon">
                  <i class="{{ feature.icon }}"></i>
                </div>
                <div>
                  <h3 class="why-us-feature__title">{{ feature.title }}</h3>
                  <p class="why-us-feature__description">{{ feature.description }}</p>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% if component.title_highlight %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const titleEl = document.getElementById('why-us-title-{{ position }}');
      if (titleEl) {
        const word = '{{ component.title_highlight }}';
        const regex = new RegExp('(' + word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
        titleEl.innerHTML = titleEl.innerHTML.replace(
          regex,
          '<span class="bg-gradient-to-r from-primary to-scandary bg-clip-text text-transparent">$1</span>'
        );
      }
    });
  </script>
{% endif %}

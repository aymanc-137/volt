{#
| Variable        | Type       | Description                                                      |
|-----------------|------------|------------------------------------------------------------------|
| display_all_url | ?string    | If it's existed, mean should show load more link to this url     |
| title           | string     |                                                                  |
| products        | Products[] |                                                                  |
| position        | Int        | Sorting number start from zero                                   |
| limit           | Int        | Number of products to be shown                                   |
| slas_hbg        | bool       | Enable slash background                                          |
| enable_glow     | bool       | Enable background glow effect                                    |
| marquee         | bool       | Enable marquee text                                              |
|#}
{% set is_vertical = false %}
{% set slashbg = component.slas_hbg | default(false) %}
{% set marquee = component.marquee | default(false) %}
{% set marqueetext = component.marqueetext | default(" سرعة /// أداء /// تحكم ") %}
{% set enable_border = component.enable_border | default(false) %}
{% set enable_glow = component.enable_glow | default(false) %}
{% set marquee_text_position = component.marquee_text_position | default('both') %}
{% set marquee_is_moving = component.marquee_is_moving %}
{% set marquee_text_size = component.marquee_text_size | default('8') %}
{% set slas_hbg_size = component.slas_hbg_size | default('20') %}
{% set slas_hbg_use_primary_color = component.slas_hbg_use_primary_color %}
{% set slas_hbg_color = component.slas_hbg_color~"1A" | default('#0000001A') %}

<section class="z-10 overflow-hidden my-size-flash-discount-{{position}} {{ enable_border ? 'border-y border-[var(--color-primary)]' : ''}} py-20 relative {{ slashbg ? 'slash-bg-' ~ position ~ ' dynamic-bg-color' : ''}} pb-32">
    {% if enable_glow %}
    <!-- Glow balls -->
    <div class="absolute top-[15%] left-[25%] w-64 h-64 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
    <div class="absolute bottom-[15%] right-[25%] w-56 h-56 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-scandary);"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-52 h-52 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
    {% endif %}
    {% if marquee %}

    {% if marquee_text_position == 'top' or marquee_text_position == 'both' %}
    <div class="styleish-text absolute top-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
        <div 
        style="font-size: {{marquee_text_size}}rem; line-height:1;"
        class="{{ marquee_is_moving ? 'marquee-reverse-sections' : '' }} flex whitespace-nowrap w-max">
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
        </div>
    </div>
    {% endif %}

    {% if marquee_text_position == 'bottom' or marquee_text_position == 'both' %}
    <div class="styleish-text absolute bottom-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
        <div
        style="font-size: {{marquee_text_size}}rem; line-height:1;"
        class="{{ marquee_is_moving ? 'marquee-content-sections' : '' }} flex whitespace-nowrap w-max">
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
        </div>
    </div>
    {% endif %}

    {% endif %}


                {% if component.title %}
            <div class="mx-auto flex flex-col space-y-6 justify-center items-center my-12 w-5/6">

                <div class="flex flex-col items-center">
                {% if component.enable_gradient_title %}
                    <h1 class="text-4xl font-alshohadaa mb-5 bg-gradient-to-r from-primary to-scandary bg-clip-text text-transparent">{{component.title}}</h1>
                {% elseif component.enable_gradient_word and component.gradient_word %}
                    <h1 id="category-flash-title-{{ position }}" class="text-4xl font-alshohadaa mb-5 dynamic-text-color">{{component.title}}</h1>
                {% else %}
                    <h1 class="text-4xl font-alshohadaa mb-5 dynamic-text-color">{{component.title}}</h1>
                {% endif %}
                {# <span class="navbar-underline"></span> #}
                </div>

                <div class="text-center mx-auto text-base lg:text-lg dynamic-text-color">
                    {{component.sub_title}}
                </div>
            </div>

            {% if component.enable_gradient_word and component.gradient_word %}
                <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const titleEl = document.getElementById('category-flash-title-{{ position }}');
                    if (titleEl) {
                    const word = '{{ component.gradient_word }}';
                    const regex = new RegExp('(' + word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
                    titleEl.innerHTML = titleEl.innerHTML.replace(
                        regex,
                        '<span class="bg-gradient-to-r from-primary to-scandary bg-clip-text text-transparent">$1</span>'
                    );
                    }
                });
                </script>
            {% endif %}

            {% endif %}



       <div class="s-products-list-wrapper w-[90%] md:w-5/6 mx-auto  s-products-list-horizontal-cards">

                
                    {% for product in component.product %}
                
                    <custom-salla-product-card isSpecial 
                    
                    {% if component.show_quantity %}
                    showQuantity
                    {% endif %}
                    
                    shadow-on-hover horizontal product="{{product}}"  ></custom-salla-product-card>
                    
                    {% endfor %}
            </div>

 
{# localStorage.setItem('showQuantity', {{theme.settings.get('showQuantity', true)}}); #}


</section>

<style>
{% if slas_hbg_use_primary_color %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, var(--color-primary-10) 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, var(--color-primary-10)  50%, 
                                var(--color-primary-10) 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% else %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, {{slas_hbg_color}} 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, {{slas_hbg_color}}  50%, 
                                {{slas_hbg_color}} 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% endif %}
</style>


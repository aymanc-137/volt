{#
| Variable                     | Type   | Description                                              |
|------------------------------|--------|----------------------------------------------------------|
| super_title                  | string | Upper caption displayed above the main title             |
| title                        | string | Main heading text                                        |
| highlighted_word             | string | Word within the title that receives the gradient effect  |
| brands[]                     | array  | Collection of brand logos                                |
| brands[].logo                | string | Logo image URL                                           |
| brands[].alt                 | string | Alternative text for the logo                            |
| brands[].name                | string | Optional label shown underneath the logo                 |
| position                     | int    | Component position on the page                           |
| slas_hbg                     | bool   | Enable slash background                                  |
| enable_glow                  | bool   | Enable background glow effect                            |
| marquee                      | bool   | Enable marquee text                                      |
#}

{% set super_title = component.super_title is defined ? component.super_title : 'أداء ممتاز' %}
{% set title_text = component.title is defined ? component.title : 'ندعم جميع شركات السيارات' %}
{% set highlight_word = component.highlighted_word is defined ? component.highlighted_word : 'السيارات' %}

{% set slashbg = component.slas_hbg | default(false) %}
{% set marquee = component.marquee | default(false) %}
{% set marqueetext = component.marqueetext | default(" سرعة /// أداء /// تحكم ") %}
{% set enable_border = component.enable_border | default(false) %}
{% set enable_glow = component.enable_glow | default(false) %}
{% set marquee_text_position = component.marquee_text_position | default('both') %}
{% set marquee_is_moving = component.marquee_is_moving %}
{% set marquee_text_size = component.marquee_text_size | default('8') %}
{% set slas_hbg_size = component.slas_hbg_size | default('20') %}
{% set slas_hbg_use_primary_color = component.slas_hbg_use_primary_color %}
{% set slas_hbg_color = component.slas_hbg_color~"1A" | default('#0000001A') %}

{% set brands = component.brands|default([]) %}

<section class="brands-volt relative z-10 overflow-hidden
 {{ enable_border ? 'border-y border-[var(--color-primary)]' : ''}} 
  {{ slashbg ? 'slash-bg-' ~ position ~ ' dynamic-bg-color' : ''}}">
    {% if enable_glow %}
    <!-- Glow balls -->
    <div class="absolute top-[15%] left-[25%] w-64 h-64 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
    <div class="absolute bottom-[15%] right-[25%] w-56 h-56 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-scandary);"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-52 h-52 rounded-full blur-3xl opacity-60 pointer-events-none" style="background-color: var(--color-primary);"></div>
    {% endif %}
    {% if marquee %}

    {% if marquee_text_position == 'top' or marquee_text_position == 'both' %}
    <div class="styleish-text absolute top-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
        <div 
        style="font-size: {{marquee_text_size}}rem; line-height:1;"
        class="{{ marquee_is_moving ? 'marquee-reverse-sections' : '' }} flex whitespace-nowrap w-max">
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
        </div>
    </div>
    {% endif %}

    {% if marquee_text_position == 'bottom' or marquee_text_position == 'both' %}
    <div class="styleish-text absolute bottom-10 left-0 w-full opacity-10 pointer-events-none select-none overflow-hidden" dir="ltr">
        <div
        style="font-size: {{marquee_text_size}}rem; line-height:1;"
        class="{{ marquee_is_moving ? 'marquee-content-sections' : '' }} flex whitespace-nowrap w-max">
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
            <span class="font-alshohadaa font-bold display-text whitespace-nowrap px-4">
                {{marqueetext}}&nbsp;&nbsp;&nbsp;{{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}&nbsp;&nbsp;&nbsp; {{marqueetext}}
            </span>
        </div>
    </div>
    {% endif %}

    {% endif %}
  <div class="container  my-12">
    <div class="dynamic-bg-color brands-volt__inner relative isolate overflow-hidden rounded-3xl  px-6 py-12 text-center shadow-xl sm:px-10 lg:px-16 dark:bg-dark-foreground dark:shadow-none dynamic-text-color">
      <span class="brands-volt__glow pointer-events-none absolute top-16 right-1/2 h-64 w-64 translate-x-1/2 rounded-full bg-gradient-to-br from-primary via-transparent to-transparent blur-3xl opacity-70 -z-10 dark:from-primary"></span>

      <div class="relative space-y-4">
        {% if super_title %}
          <span class="inline-block text-sm font-semibold tracking-wide text-primary">
            {{ super_title }}
          </span>
        {% endif %}

        <h2 id="brands-volt-title-{{ position }}" class="text-2xl font-bold leading-snug dynamic-text-color sm:text-3xl">
          {{ title_text }}
        </h2>

        <div class="mx-auto h-0.5 w-28 rounded-full bg-gradient-to-r from-primary to-scandary"></div>
      </div>

      {% if brands %}
        <div class="brands-volt__grid mt-10 grid grid-cols-2 gap-8 sm:grid-cols-3 lg:grid-cols-4">
          {% for brand in brands %}
            {% set brand_name = brand.name|default('') %}
            {% set brand_alt = brand.alt|default(brand_name|default('Brand logo')) %}
            {% set brand_url = brand.url|default(null) %}
            {% set item_classes = 'brands-volt__item group   flex flex-col items-center gap-3 text-[var(--color-text)] transition duration-200 ease-out hover:text-primary dark:text-white/70 dark:hover:text-scandary' %}
            {% set item_content -%}
              {% if brand.logo %}
                <div class="brands-volt__logo flex h-20 w-20 items-center justify-center rounded-full bg-light-background ring-1 ring-[rgba(0,0,0,0.08)] backdrop-blur-sm transition duration-200 ease-out group-hover:scale-105 group-hover:ring-2 group-hover:ring-[var(--color-primary)] dark:bg-white/5 dark:ring-white/10 dark:group-hover:ring-[var(--color-scandary)]">
                  <img
                    src="{{ brand.logo }}"
                    alt="{{ brand_alt }}"
                    class="max-h-12 w-auto object-contain"
                    loading="lazy"
                  />
                </div>
              {% endif %}

              {% if brand_name %}
                <span class="text-sm font-medium tracking-wide">{{ brand_name }}</span>
              {% endif %}
            {%- endset %}

            {% if brand_url %}
              <a href="{{ brand_url }}" class="{{ item_classes }}" target="_blank" rel="noopener">
                {{ item_content|raw }}
              </a>
            {% else %}
              <div class="{{ item_classes }}">
                {{ item_content|raw }}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% else %}
        <p class="mt-10 text-sm text-[var(--color-text)] dark:text-white/60">
          لم يتم إضافة شعارات بعد. أضف الشعارات عبر إعدادات المكون.
        </p>
      {% endif %}
    </div>
  </div>
</section>

{% if highlight_word %}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const titleEl = document.getElementById('brands-volt-title-{{ position }}');
      if (!titleEl) return;

      const word = '{{ highlight_word|e('js') }}';
      if (!word) return;

      const escapeRegex = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      const regex = new RegExp('(' + escapeRegex + ')', 'gi');
      titleEl.innerHTML = titleEl.textContent.replace(
        regex,
        '<span class="brands-volt__highlight bg-gradient-to-r from-primary to-scandary bg-clip-text text-transparent">$1</span>'
      );
    });
  </script>
{% endif %}

<style>
{% if slas_hbg_use_primary_color %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, var(--color-primary-10) 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, var(--color-primary-10)  50%, 
                                var(--color-primary-10) 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% else %}
.slash-bg-{{position}} {
   background: linear-gradient(135deg, {{slas_hbg_color}} 25%, rgba(0, 0, 0, 0)  
   25%, rgba(0, 0, 0, 0)  50%, {{slas_hbg_color}}  50%, 
                                {{slas_hbg_color}} 75%, rgba(0, 0, 0, 0) 75%);
  background-size: {{slas_hbg_size}}px {{slas_hbg_size}}px;
}
{% endif %}
</style>
